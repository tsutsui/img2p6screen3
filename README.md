# img2screen3

256x192ドットの画像をPC-6001用の SCREEN 3 のVRAMデータに変換する雑ツール
（こんな名前ですが、途中で必要にかられて SCREEN 4 のモードも追加しました）

## 使い方

```
% img2screen3 [-m 3|4] [-c 1|2] [変換元画像ファイル] [変換後VRAMデータ]
```

### オプション

| オプション    | 値 | 内容 |
|---------------|------|------|
| `-m screen` | `3` または `4` | SCREEN 3 または SCREEN 4 どちらに変換するかを指定します（デフォルト: 3） |
| `-c color` | `1` または `2` | SCREEN 3 の場合に色モード (`color ,,1` または `color ,,2`) を指定します (デフォルト: 1) |

### エミュレータ PC6001VX での使い方

1. `img2p6screen3 -c 1 [イメージデータ] p6.bin` で VRAMデータ作成
（`color,,2` の 白・シアン・マゼンタ・橙 のカラーの場合は `-c 2` を指定）
1. `How Many Pages?` は `2` を選択
1. `screen 3,2,2:color ,,1:cls` または `screen 3,2,2:color ,,2:cls` で VRAM初期化
SCREEN 4 の場合は `screen 4,2,2:cls` とかで
1. PAGE DOWN (PC-6001 PAGEキー相当) を押してグラフィック画面表示
1. F6 を押してデバッガに入る
1. `loadmem p6.bin 0xe200 0xf9ff` として作成した VRAMデータをロード
1. F6 を押してデバッガから戻る

## 仕様

とりあえず自分用に動けばいい、で作ったので雑設定です

- 出力VRAMは画像領域のみでアトリビュートは含みません
- 256x192 の stb_image がサポートしている画像なら読み込めます
(`bmp`, `gif`, `jpg`, `png` 等。`webp` はダメ)
- SCREEN 3 の場合、横長ドット分の2ドットの色を平均化した色で 4色の最近傍色を選択します
- SCREEN 4 の場合、各ドットをグレースケール化して 128しきい値で2値化します
- 誤差拡散等の凝った2値化は事前に別ツールで処置してください
- 自作デモ用データ作成のために 256x192 以外のサイズを変換する場合は
適当に `P6_XSIZE` と `P6_YSIZE` を書き換えてください